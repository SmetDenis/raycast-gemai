---
description: "–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å AI –º–æ–¥–µ–ª—è–º–∏: reasoning –º–æ–¥–µ–ª–∏ o1-—Å–µ—Ä–∏–∏, vision API, –ø–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ - –¥–ª—è aiProvider –∏ config —Ñ–∞–π–ª–æ–≤"
globs: "src/core/aiProvider.ts,src/core/buildAIConfig.ts,src/core/buildOpenAIConfig.ts,src/core/models.ts"
alwaysApply: true
---

# AI –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

## ü§ñ Reasoning –º–æ–¥–µ–ª–∏ (o1-—Å–µ—Ä–∏—è) - –ö–†–ò–¢–ò–ß–ù–û!

- **–ù–ò–ö–û–ì–î–ê** –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π system prompts –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ o1-preview/o1-mini
- **–í–°–ï–ì–î–ê** –≤–∫–ª—é—á–∞–π system prompt –≤ user message –¥–ª—è reasoning –º–æ–¥–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π `max_completion_tokens` –≤–º–µ—Å—Ç–æ `max_tokens` –¥–ª—è o1-—Å–µ—Ä–∏–∏
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ = 1 –¥–ª—è reasoning –º–æ–¥–µ–ª–µ–π (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ OpenAI)

## üñºÔ∏è Vision API –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ - –ö–†–ò–¢–ò–ß–ù–û!

- **Reasoning –º–æ–¥–µ–ª–∏ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç vision** - –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ o1 ‚Üí GPT-4o –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏
- –°–æ—Ö—Ä–∞–Ω—è–π –∏—Å—Ö–æ–¥–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π `switchToVisionModel()` –≤ `aiProvider.ts`

## üí∞ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –º–æ–¥–µ–ª–µ–π (–ø—Ä–æ–≤–µ—Ä—è–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ!)

**OpenAI:**
- **GPT-4o**: $2.50/$10.00 (–≤–≤–æ–¥/–≤—ã–≤–æ–¥ –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)
- **GPT-4o-mini**: $0.15/$0.60  
- **o1-preview**: $15.00/$60.00
- **o1-mini**: $3.00/$12.00

**Gemini:**
- **Gemini 1.5 Pro**: $1.25/$5.00
- **Gemini 1.5 Flash**: $0.075/$0.30

## üìä –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- –ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API (`usageMetadata`) –∫–æ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ
- OpenAI: `prompt_tokens` –≤–∫–ª—é—á–∞–µ—Ç system + user, –≤—ã—á–∏—Å–ª—è–π user —Ç–æ–∫–µ–Ω—ã –≤—ã—á–∏—Ç–∞–Ω–∏–µ–º
- Gemini: `promptTokenCount` = –≤–µ—Å—å –≤–≤–æ–¥, `candidatesTokenCount` = –≤—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- –í–∫–ª—é—á–∞–π thinking —Ç–æ–∫–µ–Ω—ã –¥–ª—è reasoning –º–æ–¥–µ–ª–µ–π –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- **–¢–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã**: (input_tokens * input_price + output_tokens * output_price) / 1M
