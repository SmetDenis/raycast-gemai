---
description: 
globs: 
alwaysApply: false
---
# Определения моделей и управление ценами

## Актуальные цены моделей (проверяй регулярно!)

### OpenAI
- **GPT-4o**: $2.50/$10.00 (ввод/вывод за 1M токенов)
- **GPT-4o-mini**: $0.15/$0.60  
- **o1-preview**: $15.00/$60.00
- **o1-mini**: $3.00/$12.00

### Gemini
- **Gemini 1.5 Pro**: $1.25/$5.00
- **Gemini 1.5 Flash**: $0.075/$0.30

## Определение моделей в @models.ts
- **Группировка по провайдерам**: четкое разделение OpenAI/Gemini
- **Метаданные возможностей**: vision, reasoning, max_tokens
- **Актуальные цены**: синхронизация с официальными API
- **Отображаемые имена**: понятные пользователю названия

## Расчет стоимости
- **Точные формулы**: (input_tokens * input_price + output_tokens * output_price) / 1M
- **Thinking токены**: включай в общую стоимость для o1-моделей  
- **Округление**: до 4 знаков после запятой
- **Валюта**: всегда в USD

## Управление версиями моделей
- **Deprecated флаги**: для устаревающих моделей
- **Миграционные пути**: автоматические замены
- **Новые модели**: безопасное добавление с fallback'ами
